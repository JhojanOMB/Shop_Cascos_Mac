{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/errores.css' %}">

{% endblock %}

{% block header_links %}

<style>
    @media (max-width: 768px) {
    .fondo-error {
        text-align: center;
        padding: 2rem 1rem;
    }

    .img-error {
        max-width: 16rem !important;
        margin-bottom: 2rem;
    }

    .card-error {
        padding: 1.5rem;
    }
    }

    .img-error {
        max-width: 100%;
        height: auto;
        object-fit: contain;
    }

    .card-error {
        background-color: #fff;
        border-radius: 1.5rem;
        box-shadow: 0 .75rem 2rem rgba(0, 0, 0, 0.1);
        border-left: .5rem solid #ce5504;
        padding: 1.5rem;
    }

    .card-error .card-title {
        color: #ce5504;
    }

    .btn-naranja-rey-gradient {
        background: linear-gradient(135deg, #ce5504, #f26b04) !important;
        color: #fff !important;
        border-radius: 2rem;
        padding: .75rem 2rem;
        box-shadow: 0 .25rem .5rem rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease-in-out;
    }

    .btn-naranja-rey-gradient:hover {
        opacity: .9 !important;
        color: #fff3e6 !important;
    }

    .icono-error {
        color: #ce5504;
    }

    #counter {
        font-weight: bold;
        color: #004589;
    }
</style>

{% if user.is_authenticated %}
    <li class="nav-item mx-2">
        {% if user.rol == 'gerente' %}
            <a href="{% url 'dashboard_gerente' %}" class="btn btn-dark">Mi Perfil</a>
        {% elif user.rol == 'vendedor' %}
            <a href="{% url 'dashboard_vendedor' %}" class="btn btn-dark">Mi Perfil</a>
        {% endif %}
    </li>
    <li class="nav-item">
        <a href="{% url 'index' %}" class="btn btn-dark">Volver al inicio</a>
        <a href="{% url 'logout' %}" class="btn btn-dark">Cerrar Sesión</a>
    </li>
{% else %}
    <li class="nav-item">
        <a href="{% url 'login' %}" class="btn btn-dark">Iniciar Sesión</a>
        <a href="{% url 'index' %}" class="btn btn-dark">Volver al inicio</a>
    </li>
{% endif %}
{% endblock %}

{% block mobile_header_links %}
  {% if user.is_authenticated %}
    <li class="px-4">
      <a href="{% url 'index' %}"
         class="flex items-center gap-3 w-full px-3 py-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M13 5v6h6" />
        </svg>
        <span class="text-sm font-medium text-gray-800">Volver al inicio</span>
      </a>
    </li>

    <li class="px-4">
      <a href="{% if user.rol == 'gerente' %}{% url 'dashboard_gerente' %}{% else %}{% url 'dashboard_vendedor' %}{% endif %}"
         class="flex items-center gap-3 w-full px-3 py-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.6 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        <span class="text-sm font-medium text-gray-800">Mi perfil</span>
      </a>
    </li>

    <li class="px-4">
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit"
          class="flex items-center gap-3 w-full px-3 py-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-300 text-left">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1" />
          </svg>
          <span class="text-sm font-medium text-gray-800">Cerrar sesión</span>
        </button>
      </form>
    </li>
  {% else %}
    <li class="px-4">
      <a href="{% url 'login' %}"
         class="flex items-center gap-3 w-full px-3 py-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12H3m12 0l-4 4m4-4l-4-4M21 12v6a2 2 0 01-2 2H7" />
        </svg>
        <span class="text-sm font-medium text-gray-800">Iniciar sesión</span>
      </a>
    </li>

    <li class="px-4">
      <a href="{% url 'index' %}"
         class="flex items-center gap-3 w-full px-3 py-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M13 5v6h6" />
        </svg>
        <span class="text-sm font-medium text-gray-800">Volver al inicio</span>
      </a>
    </li>
  {% endif %}
{% endblock %}


{% block content %}
<div class="fondo-error container-fluid py-5">
  <div class="row justify-content-center align-items-center g-5">
    <!-- Imagen decorativa -->
    <div class="col-lg-5 text-center">
      <img src="{% static 'img/fondo_errores_cascos.webp' %}" alt="Error Casco" class="img-fluid img-error animate__animated animate__fadeInLeft" style="max-width: 28rem;">
    </div>

    <!-- Contenido del error -->
    <div class="col-lg-6">
      <div class="card-error text-center p-4 animate__animated animate__fadeInRight">
        <div class="mb-3">
          <i class="fa-solid fa-triangle-exclamation fa-3x icono-error"></i>
        </div>

        <h1 class="display-4 fw-bold text-naranja-rey mb-2">{{ codigo_error }}</h1>
        <h2 class="card-title mb-3">{{ titulo_error }}</h2>
        <p class="card-text mb-4">{{ mensaje_error }}</p>

        <a href="{% url 'index' %}" class="btn btn-naranja-rey-gradient border border-black mb-3">
          <i class="fa-solid fa-house me-2"></i>Volver al Inicio
        </a>

        <p class="text-muted mb-0">
          Serás redirigido automáticamente en <span id="counter">15</span> segundos...
        </p>
      </div>
    </div>
  </div>
</div>


<script>
    let count = 15;
    const counter = document.getElementById('counter');
    const interval = setInterval(() => {
        count--;
        counter.textContent = count;
        if (count <= 0) {
            clearInterval(interval);
            window.location.href = '{% url "index" %}';
        }
    }, 1000);
</script>
{% endblock %}
