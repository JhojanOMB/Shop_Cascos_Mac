{% load static %}
{% load custom_filters %}
{% load humanize %}

<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Cascos Mac{% endblock %}</title>
  <link rel="shortcut icon" href="{% static 'img/logo2.png' %}" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <script src="{% static 'js/formato.js' %}"></script>
  {% block extra_head %}{% endblock %}

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/css/lightbox.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/a08c413a1a.js" crossorigin="anonymous"></script>
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.2"></script>

</head>

<body class="flex flex-col min-h-screen bg-white text-gray-800">
  <!-- Navbar -->
  <header class="hidden md:flex items-center justify-between {{ UI_COLORS.navbar_bg }} {{ UI_COLORS.navbar_text }} px-8 py-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between w-full">
      <a href="{% url 'index' %}" class="flex items-center space-x-2">
        <img src="{% static 'img/logo2.png' %}" alt="Logo Cascos Mac" class="h-8 w-8">
        <span class="text-xl font-bold">Cascos Mac</span>
      </a>
      <div class="flex-1 px-4">
        {% if request.resolver_match.url_name in 'index product_detail buscar_productos' %}
        <form method="get" action="{% url 'buscar_productos' %}" class="w-full">
          <div class="flex items-center bg-gray-100 text-black rounded-full overflow-hidden border border-gray-300">
            <input type="search" name="q" placeholder="Buscar productos..."
              class="flex-1 px-4 py-2 focus:outline-none"
              value="{{ request.GET.q }}">
            <button type="submit" class="px-4">
              <i class="fas fa-search text-gray-500"></i>
            </button>
          </div>
        </form>
        {% endif %}
      </div>
      <div class="flex items-center space-x-4">
        {% block header_links %}{% endblock %}
      </div>
    </div>
  </header>

  <!-- Main content -->
  <main class="flex-1 overflow-y-auto p-6">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-4">
    <div class="max-w-7xl mx-auto text-center px-4">
      <p class="text-sm mb-1">&copy; 2025 Cascos Mac. Todos los derechos reservados.</p>
      <p class="text-sm">
        <a href="https://jhojanomb.github.io/JOMB/" class="underline hover:text-gray-300">Hecho por JOMB</a>
      </p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script>
    const openBtn = document.getElementById('mobile-open'),
      closeBtn = document.getElementById('mobile-close'),
      menu = document.getElementById('mobile-menu'),
      overlay = document.getElementById('mobile-overlay');

    openBtn?.addEventListener('click', () => {
      menu.classList.remove('-translate-x-full');
      overlay.classList.remove('hidden');
    });
    closeBtn?.addEventListener('click', () => {
      menu.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
    });
    overlay?.addEventListener('click', () => {
      menu.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
    });
  </script>
  {% block extra_js %}{% endblock %}
</body>

</html>
